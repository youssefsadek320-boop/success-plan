<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Success Plan | Youssef Sadek</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>

    <style>
        /* --- Ù‡Ù†Ø§ ÙƒÙ„ Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù€ CSS (Ø§Ù„ØªÙ†Ø³ÙŠÙ‚) --- */
        :root { --orange: #ff6600; --black: #0d0d0d; --gray: #1a1a1a; }
        body { background: var(--black); color: white; font-family: 'Segoe UI', Tahoma, sans-serif; margin: 0; padding: 60px 20px; direction: rtl; text-align: center; }
        .container { max-width: 1300px; width: 95%; background: var(--gray); padding: 50px; border-radius: 40px; border: 1px solid #333; margin: auto; box-shadow: 0 0 80px rgba(255, 102, 0, 0.2); }
        .brand-name { color: var(--orange); font-size: 6rem; letter-spacing: 5px; margin: 0; text-shadow: 4px 4px 20px rgba(0,0,0,0.8); font-weight: 900; }
        .input-options { margin: 40px 0; display: flex; gap: 30px; justify-content: center; flex-wrap: wrap; }
        .input-options button { background: transparent; color: var(--orange); border: 4px solid var(--orange); padding: 20px 60px; border-radius: 20px; font-size: 1.8rem; font-weight: bold; cursor: pointer; transition: 0.3s ease; }
        .input-options button.active { background: var(--orange); color: #000; }
        .upload-box { background: #000; border: 4px dashed var(--orange); padding: 50px; border-radius: 30px; margin-bottom: 30px; }
        .text-input { width: 100%; padding: 25px; background: #000; border: 2px solid var(--orange); color: #fff; border-radius: 15px; font-size: 1.5rem; margin-bottom: 20px; box-sizing: border-box; }
        textarea { width: 100%; height: 450px; background: #050505; color: #fff; border: 1px solid #444; border-radius: 30px; padding: 35px; font-size: 1.8rem; line-height: 1.8; box-sizing: border-box; }
        .btn-primary { background: var(--orange); color: #000; border: none; padding: 30px 0; font-size: 2.5rem; border-radius: 30px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 40px; box-shadow: 0 10px 30px rgba(255, 102, 0, 0.4); }
        .result-box { background: #000; padding: 50px; border-radius: 40px; margin-top: 50px; border-right: 15px solid var(--orange); text-align: right; font-size: 1.7rem; line-height: 2.2; }
        .welcome-toast { position: fixed; top: 40px; left: 50%; transform: translateX(-50%); background: var(--orange); color: #000; padding: 25px 80px; border-radius: 70px; font-size: 2rem; z-index: 9999; font-weight: bold; }
        .badge { background: var(--orange); color: #000; padding: 8px 25px; border-radius: 30px; font-weight: bold; display: inline-block; font-size: 1.2rem; margin-top: 15px; }
        footer { margin-top: 80px; border-top: 1px solid #444; padding-top: 30px; }
        .loader { border: 8px solid #333; border-top: 8px solid var(--orange); border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; margin: 20px auto; display: none; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙƒÙˆÙŠØ² ÙˆØ§Ù„Ù†ØªÙŠØ¬Ø© */
        .result-card { margin-top: 30px; padding: 40px; border: 4px solid var(--orange); border-radius: 20px; text-align: center; background: #050505; }
        .quiz-q { background: #000; padding: 15px; border-radius: 10px; margin-bottom: 10px; border-right: 4px solid var(--orange); text-align: right; margin-top: 15px; }
        .quiz-q select { width: 100%; padding: 10px; background: #222; color: white; border: 1px solid #444; border-radius: 5px; font-size: 1.2rem; }
    </style>
</head>
<body>

    <div id="welcomeMessage" class="welcome-toast">Ø§Ù†Øª Ù‚Ø¯Ù‡Ø§ ğŸ˜</div>

    <div class="container">
        <header>
            <h1 class="brand-name">SUCCESS PLAN</h1>
            <p style="color: #aaa; font-size: 1.5rem; margin-top: 10px;">Ø¨ÙˆØ§Ø¨Ø© ÙŠÙˆØ³Ù ØµØ§Ø¯Ù‚ Ù„Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ</p>
            <div id="statusBadge" class="badge">Ù†Ø¸Ø§Ù… AI Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„</div>
        </header>

        <div class="input-options">
            <button onclick="switchInput('text')" id="btnText" class="active">Ù†Øµ Ù…Ø¨Ø§Ø´Ø±</button>
            <button onclick="switchInput('pdf')" id="btnPdf">Ù…Ù„Ù PDF</button>
            <button onclick="switchInput('video')" id="btnVideo">Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ</button>
        </div>

        <div id="videoUrlArea" class="upload-box" style="display: none;">
            <input type="text" id="videoUrl" placeholder="Ø§Ù„ØµÙ‚ Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ ÙŠÙˆØªÙŠÙˆØ¨ Ù‡Ù†Ø§..." class="text-input">
        </div>

        <div id="pdfUploadArea" class="upload-box" style="display: none;">
            <input type="file" id="pdfFile" accept=".pdf" style="color: var(--orange); font-size: 1.5rem; font-weight: bold; cursor: pointer;">
        </div>

        <textarea id="lessonInput" placeholder="Ø§ÙƒØªØ¨ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¯Ø±Ø³ Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù..."></textarea>

        <div class="extra-options" style="margin-top:20px; text-align:right; font-size:1.3rem;">
            <label><input type="checkbox" id="makeQuiz"> ğŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø®ØªØ¨Ø§Ø± (Quiz) ÙˆØªØµØ­ÙŠØ­Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</label>
        </div>

        <div id="aiLoader" class="loader"></div>
        <button onclick="askAI()" class="btn-primary">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø´Ø§Ù…Ù„ âš¡</button>

        <div id="resultSection" class="result-box">
            <h3 style="color: var(--orange); font-size: 2.4rem;">âœ¨ Ø§Ù„Ø®Ù„Ø§ØµØ© ÙˆØ§Ù„Ù‚ÙˆØ§Ø¹Ø¯:</h3>
            <div id="aiOutput">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>
        </div>

        <div id="quizSection" class="result-box" style="display:none;">
            <h3 style="color: var(--orange); font-size: 2.4rem;">ğŸ“ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ:</h3>
            <div id="quizContainer"></div>
            <button onclick="calculateFinalScore()" class="btn-primary" style="margin-top:20px; font-size:1.8rem;">ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</button>
        </div>

        <div id="quizResultArea" class="result-card" style="display:none;">
            <div id="resultEmoji" style="font-size: 70px;"></div>
            <h2 id="scorePercent" style="font-size: 2.5rem; color: var(--orange);"></h2>
            <p id="motivationalMessage" style="font-size: 2rem;"></p>
        </div>

        <footer>
            <h2 style="color: var(--orange); letter-spacing: 8px; font-size: 2.8rem;">YOUSSEF SADEK</h2>
        </footer>
    </div>

    <script>
        /* --- Ù‡Ù†Ø§ ÙƒÙ„ Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù€ JavaScript (Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©) --- */
        const API_KEY = "AIzaSyAx34r5v35OkuM1VOofKULadKVA06xnJC8"; 
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;

        setTimeout(() => document.getElementById('welcomeMessage').style.display = 'none', 5000);

        function switchInput(type) {
            document.getElementById('pdfUploadArea').style.display = (type === 'pdf') ? 'block' : 'none';
            document.getElementById('videoUrlArea').style.display = (type === 'video') ? 'block' : 'none';
            document.getElementById('lessonInput').style.display = (type === 'video') ? 'none' : 'block';
            document.querySelectorAll('.input-options button').forEach(btn => btn.classList.remove('active'));
            document.getElementById('btn' + type.charAt(0).toUpperCase() + type.slice(1)).classList.add('active');
        }

        let correctAnswers = [];

        async function askAI() {
            const input = document.getElementById('lessonInput').value || document.getElementById('videoUrl').value;
            const isQuiz = document.getElementById('makeQuiz').checked;
            const output = document.getElementById('aiOutput');
            const badge = document.getElementById('statusBadge');
            const loader = document.getElementById('aiLoader');

            if(!input) return alert("Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ ÙŠØ§ Ø¨Ø·Ù„!");

            badge.innerText = "Success Plan ÙŠØ­Ù„Ù„ Ø§Ù„Ø¢Ù†... ğŸ§ ";
            loader.style.display = 'block';

            let prompt = `Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø¯Ø±Ø§Ø³Ø© Ø°ÙƒÙŠ Ù„Ù…Ù†ØµØ© Success Plan. Ø­Ù„Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰: "${input}". 
            1. Ù„Ø®ØµÙ‡ Ø¨ÙˆØ¶ÙˆØ­ ÙˆØ§Ø³ØªØ®Ø±Ø¬ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯.`;
            
            if(isQuiz) prompt += `\n2. Ø£Ù†Ø´Ø¦ ÙƒÙˆÙŠØ² 5 Ø£Ø³Ø¦Ù„Ø© Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯. ÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø±Ø¯ Ø¶Ø¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø´ÙƒÙ„ ÙÙ‚Ø·: [ANS: 1,0,2,1,0]`;

            try {
                const response = await fetch(API_URL, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });
                const data = await response.json();
                const resText = data.candidates[0].content.parts[0].text;
                
                output.innerHTML = resText.split('[ANS:')[0].replace(/\n/g, "<br>").replace(/\*\*(.*?)\*\*/g, "<b>$1</b>");
                
                if(isQuiz && resText.includes('[ANS:')) {
                    const ansMatch = resText.match(/\[ANS:\s*(.*?)\]/);
                    if(ansMatch) {
                        correctAnswers = ansMatch[1].split(',').map(n => n.trim());
                        renderQuizUI();
                    }
                }
                badge.innerText = "Ø§ÙƒØªÙ…Ù„ Ø§Ù„ØªØ­Ù„ÙŠÙ„ âœ…";
            } catch(e) { 
                output.innerHTML = "Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„!";
                badge.innerText = "Ø®Ø·Ø£ âŒ";
            } finally { loader.style.display = 'none'; }
        }

        function renderQuizUI() {
            const container = document.getElementById('quizContainer');
            document.getElementById('quizSection').style.display = 'block';
            container.innerHTML = "";
            for(let i=0; i<5; i++) {
                container.innerHTML += `
                    <div class="quiz-q">
                        <p>Ø³Ø¤Ø§Ù„ ${i+1}: Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ø±Ø³ØŒ Ø§Ø®ØªØ± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©:</p>
                        <select id="ans${i}">
                            <option value="">Ø§Ø®ØªØ± Ø¥Ø¬Ø§Ø¨Ø©...</option>
                            <option value="0">Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø£ÙˆÙ„</option>
                            <option value="1">Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ</option>
                            <option value="2">Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø«Ø§Ù„Ø«</option>
                        </select>
                    </div>`;
            }
        }

        function calculateFinalScore() {
            let score = 0;
            for(let i=0; i<5; i++) {
                if(document.getElementById(`ans${i}`).value == correctAnswers[i]) score++;
            }
            const percent = (score / 5) * 100;
            showResultPopup(percent);
        }

        function showResultPopup(percent) {
            const area = document.getElementById('quizResultArea');
            const scoreText = document.getElementById('scorePercent');
            const msg = document.getElementById('motivationalMessage');
            const emoji = document.getElementById('resultEmoji');
            area.style.display = 'block';
            
            if (percent === 0) {
                scoreText.innerText = "";
                msg.innerText = "Ù…ØªØ³ØªÙ†Ø§Ø´ Ø¯Ø±Ø¬Ù‡ ÙŠØ®Ø§ÙŠØ¨ ğŸ¤¬";
                emoji.innerText = "ğŸ¤¬";
            } else {
                scoreText.innerText = `Ø¯Ø±Ø¬ØªÙƒ: ${percent}%`;
                if(percent >= 85) { msg.innerText = "Ø¹Ø§Ø´ Ø¹Ù„ÙŠÙƒ â¤ï¸ğŸ’ª"; emoji.innerText = "ğŸ†"; }
                else if(percent >= 75) { msg.innerText = "Ø´Ø§Ø·Ø± ğŸ˜"; emoji.innerText = "â­"; }
                else if(percent >= 50) { msg.innerText = "Ø¹Ù†Ø¯Ùƒ Ø§Ø­Ø³Ù† Ù…Ù† ÙƒØ¯Ù‡ ğŸ‘"; emoji.innerText = "ğŸ“ˆ"; }
                else { msg.innerText = "Ù…Ø­ØªØ§Ø¬ ØªØ°Ø§ÙƒØ± Ø§ÙƒØªØ± ğŸ« "; emoji.innerText = "ğŸ« "; }
            }
            area.scrollIntoView({ behavior: 'smooth' });
        }

        document.getElementById('pdfFile').addEventListener('change', async (e) => {
            const file = e.target.files[0];
            if (!file) return;
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';
            const reader = new FileReader();
            reader.onload = async function() {
                const typedarray = new Uint8Array(this.result);
                const pdf = await pdfjsLib.getDocument(typedarray).promise;
                let fullText = "";
                for (let i = 1; i <= pdf.numPages; i++) {
                    const page = await pdf.getPage(i);
                    const content = await page.getTextContent();
                    fullText += content.items.map(s => s.str).join(" ") + " \n";
                }
                document.getElementById('lessonInput').value = fullText.trim();
                askAI();
            };
            reader.readAsArrayBuffer(file);
        });
    </script>
</body>
</html>